apiVersion: v1
kind: Service
metadata:
  # 이 이름이 DNS 주소의 주인공이 됩니다.
  name: code-server-svc
spec:
  # 클러스터 내부 IP만 할당 (Ingress를 통해 외부 노출할 것이므로)
  type: ClusterIP 
  ports:
    - port: 80           # 서비스가 외부(클러스터 내부)에 노출하는 포트
      targetPort: 8443   # Deployment 컨테이너의 containerPort와 일치해야 함
      protocol: TCP
      name: http
  selector:
    # 중요: Deployment의 template.metadata.labels와 정확히 일치해야 연결됨
    app: code-server